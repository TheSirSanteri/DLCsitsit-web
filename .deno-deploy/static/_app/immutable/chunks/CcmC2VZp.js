import{h as l,am as g,an as v,ao as m,ap as y,aq as A,ar as S,as as p,g as N}from"./9i0Um9ta.js";const T=Symbol("is custom element"),k=Symbol("is html");function L(s){if(l){var e=!1,t=()=>{if(!e){if(e=!0,s.hasAttribute("value")){var a=s.value;_(s,"value",null),s.value=a}if(s.hasAttribute("checked")){var r=s.checked;_(s,"checked",null),s.checked=r}}};s.__on_r=t,v(t),m()}}function _(s,e,t,a){var r=w(s);l&&(r[e]=s.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&s.nodeName==="LINK")||r[e]!==(r[e]=t)&&(e==="loading"&&(s[y]=t),t==null?s.removeAttribute(e):typeof t!="string"&&E(s).includes(e)?s[e]=t:s.setAttribute(e,t))}function w(s){return s.__attributes??={[T]:s.nodeName.includes("-"),[k]:s.namespaceURI===g}}var h=new Map;function E(s){var e=s.getAttribute("is")||s.nodeName,t=h.get(e);if(t)return t;h.set(e,t=[]);for(var a,r=s,c=Element.prototype;c!==r;){a=S(r);for(var o in a)a[o].set&&t.push(o);r=A(r)}return t}function I(){const{subscribe:s,update:e}=p([]);let t=0;function a(c,o="info",n=4e3){const i={id:++t,text:c,kind:o,timeout:n};return e(f=>[...f,i]),n>0&&setTimeout(()=>r(i.id),n),i.id}function r(c){e(o=>o.filter(n=>n.id!==c))}return{subscribe:s,push:a,remove:r}}const u=I(),O={error:(s,e=6e3)=>u.push(s,"error",e),success:(s,e=3e3)=>u.push(s,"success",e),info:(s,e=3e3)=>u.push(s,"info",e)},b={token:null,username:null},d=p(b);{const s=localStorage.getItem("auth");if(s)try{d.set(JSON.parse(s))}catch{}d.subscribe(e=>{localStorage.setItem("auth",JSON.stringify(e))})}async function x(s,e={}){const t="http://localhost:8000",{token:a}=N(d),r=new Headers(e.headers||{});r.has("Content-Type")||r.set("Content-Type","application/json"),a&&r.set("Authorization",`Bearer ${a}`);const c=s.startsWith("http")?s:t+s,o=await fetch(c,{...e,headers:r}),n=await o.text(),i=n?JSON.parse(n):null;if(!o.ok){const f=i?.error||i?.message||o.statusText;throw new Error(f)}return i}export{x as a,d as b,u as c,O as n,L as r,_ as s};
